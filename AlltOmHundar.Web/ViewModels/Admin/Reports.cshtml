@model IEnumerable<AlltOmHundar.Core.Models.Report>
@{
    ViewData["Title"] = "Hantera rapporter";
}

<h1>Rapporterade inlägg</h1>
<hr />

<a asp-action="Index" class="btn btn-secondary mb-3">Tillbaka till dashboard</a>

@if (Model.Any())
{
    @foreach (var report in Model)
    {
        <div class="card mb-3">
            <div class="card-header bg-warning">
                <strong>Rapport #@report.Id</strong> - Rapporterad @report.CreatedAt.ToString("yyyy-MM-dd HH:mm")
            </div>
            <div class="card-body">
                <h5>Anledning:</h5>
                <p>@report.Reason</p>

                <h5>Rapporterat inlägg:</h5>
                <div class="border p-3 mb-3 bg-light">
                    <p><strong>Författare:</strong> @report.Post.User.Username</p>
                    <p>@report.Post.Content</p>
                    <small class="text-muted">Postat: @report.Post.CreatedAt.ToString("yyyy-MM-dd HH:mm")</small>
                </div>

                <p><strong>Rapporterad av:</strong> @report.ReportedByUser.Username</p>

                <form asp-action="ResolveReport" asp-route-reportId="@report.Id" method="post" class="mt-3">
                    <div class="mb-3">
                        <label class="form-label">Admin-anteckningar</label>
                        <textarea name="adminNotes" class="form-control" rows="2"></textarea>
                    </div>
                    <button type="submit" name="action" value="resolve" class="btn btn-success">Markera som löst</button>
                    <button type="submit" name="action" value="dismiss" class="btn btn-secondary">Avfärda</button>
                </form>
            </div>
        </div>
    }
}
else
{
    <div class="alert alert-info">
        <p>Inga väntande rapporter! </p>
    </div>
}